# Cosense Export Webアプリ – ワイヤーフレーム v0.2

今回の変更: **プレビュー機能** を追加し、ダウンロード前に ZIP の内容（Markdown と画像）を確認できるようにしました。

---

## 1. トップ / エクスポート画面

- **ヘッダー**: 左にアプリ名、右に「履歴」リンク。
- **メインカード** (中央寄せ、`max-w-lg`):

```
+---------------------------------------+
| プロジェクトID / URL   [__________]   |
| （任意）sid Cookie     [__________]   |
|                                       |
|  [ プレビュー ]   [ エクスポート ]     |
+---------------------------------------+
```

| ボタン        | 動作                                                 |
| ---------- | -------------------------------------------------- |
| **プレビュー**  | サーバへリクエスト → 生成予定ファイル一覧と最初の Markdown を表示 (ダウンロードなし) |
| **エクスポート** | ZIP を生成し自動ダウンロード                                   |

- **成功時**: 右下トースト「エクスポート完了 ✔ – ダウンロード中…」。
- **失敗時**: トーストに詳細、再試行リンク。

---

## 2. プレビュー画面 (モーダル)

```
+---------------------------------------------------------+
|   🗂️ my-project プレビュー                              |
|---------------------------------------------------------|
| 左: ツリービュー            | 右: Markdownレンダリング   |
| - README.md                | ##################         |
| - docs/                    | # タイトル                 |
|   └─ spec.md               | 本文…                      |
| - images/                  |                            |
|   ├─ aaa.png               |                            |
|   └─ bbb.jpg               |                            |
|---------------------------------------------------------|
|             [ ダウンロード ]  [ キャンセル ]            |
+---------------------------------------------------------+
```

- **ツリービュー**: ファイル階層とサイズを表示。クリックでプレビュー。
- **Markdown ビューア**: `react-markdown` + `highlight.js`。
- **画像**: クリックでライトボックス拡大。
- **ダウンロード**: そのまま ZIP 取得 → プレビューをスキップしても内容同一。

---

## 3. 履歴画面

- **ヘッダー**: トップと同じ＋「エクスポート」リンク。
- **テーブル**:

| 日時               | プロジェクト     | ステータス | サイズ    | 操作       |
| ---------------- | ---------- | ----- | ------ | -------- |
| 2025‑06‑24 14:02 | my-project | ✅     | 4.2 MB | ⬇️ プレビュー |
| 2025‑06‑23 09:18 | secret-pj  | ❌     | —      | 🔄 再試行   |

- ✅ 行には **プレビュー** ボタンを追加。クリックでプレビュー画面に遷移（ZIP を再生成せず、保存済みメタと直接レンダリング）。
- 30日超の行は薄灰色、左上に一括削除チェックボックス。

---

## 4. 設定モーダル (ヘッダーの歯車アイコン)

| 項目             | コントロール                        | デフォルト (✓) |
| -------------- | ----------------------------- | --------- |
| **ファイル命名**     | slug / タイトル / ID              | slug ✓    |
| **画像フォルダ**     | `images/` ✓ / ルート直下           | ✓         |
| **ZIP名**       | `project_YYYYMMDD.zip` ✓ / 固定 | ✓         |
| **履歴保持期間**     | 30日 ✓ / 無制限 / 手動削除            | ✓         |
| **日本語タイトルの扱い** | UTF‑8 ✓ / URLエンコード            | ✓         |

[保存] ボタンで `localStorage` に書き込み（サーバ通信なし）。

---

## 5. カラー & タイポグラフィ

- Tailwind 標準パレット、**primary**: `emerald-500`
- カード: `rounded-2xl`, `shadow-md`, `p-6`
- フォント: **Inter**, 本文 `text-base`、見出し `text-2xl`

---

## 6. 状態 & フィードバック

| 状態           | 表示                                     |
| ------------ | -------------------------------------- |
| **ロード中**     | 全画面半透明オーバーレイ＋スピナー                      |
| **プレビュー生成中** | モーダル内にスピナー＋「プレビューを生成中…」                |
| **成功**       | トースト「エクスポート完了 ✔ – ダウンロード中…」            |
| **エラー**      | トースト「エクスポート失敗 ✖ – ログをコピー」（クリップボードアイコン） |

---

## 7. レスポンシブ

- **モバイル (<640px)**: カード `w-full`、プレビューは全画面モーダル（ツリービュー折りたたみ）。
- **デスクトップ**: カード中央 `max-w-lg`、プレビュー幅 `80vw`。

---

### 備考

- 全要素キーボード操作可能（Tab 順、aria-label）。
- アイコン: **Heroicons** – ダウンロード、再試行、削除、歯車、フォルダ。
- アニメーション: **Framer Motion** でモーダル／トースト／ツリービュー折りたたみ。

